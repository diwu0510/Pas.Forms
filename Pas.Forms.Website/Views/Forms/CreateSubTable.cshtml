@model FormTable

@{
    Layout = null;
}

<!DOCTYPE html>

<html lang="zh-CN">
<head>
    <title>子表管理</title>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.css">
    <link rel="stylesheet" href="~/css/site.css">
</head>
<body>
<div class="container" style="margin-top: 20px;">
    <h3>增加关联子表</h3>
    <h4>@ViewBag.Form</h4>
    <hr>
    <form asp-action="CreateSubTable">
        <input type="hidden" asp-for="FormId" />
        <div class="form-group row">
            <label asp-for="DbTable" class="col-sm-2 col-form-label">子表</label>
            <div class="col-sm-6">
                <select class="form-control" asp-for="DbTable" asp-items="(List<SelectListItem>) ViewBag.Tables"></select>
            </div>
        </div>
        <div class="form-group row">
            <label asp-for="SubField" class="col-sm-2 col-form-label">关联字段</label>
            <div class="col-sm-6">
                <select class="form-control" asp-for="SubField" asp-items="(List<SelectListItem>) ViewBag.Tables">
                </select>
            </div>
        </div>
        <div class="form-group row">
            <label asp-for="MasterField" class="col-sm-2 col-form-label">关联主表字段</label>
            <div class="col-sm-6">
                <select class="form-control" asp-for="DbTable" asp-items="(List<SelectListItem>) ViewBag.Fields">
                    <option value="Id">ID</option>
                </select>
            </div>
        </div>
        <hr>
        <button type="submit" class="btn btn-primary mb-2">提交</button>
        &nbsp;&nbsp;&nbsp;&nbsp;
        <a asp-action="SubTable">返回列表</a>
    </form>
</div>
<script>
    var table = $('#DbTable').val();
    var originTable = table;

    $(function() {
    });

    function getTableFields() {
        table = $('#DbTable').val();
        if (table === originTable) return;
        originTable = table;

        $.get('/')
    }
</script>
</body>
</html>